<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>World News Map | The Old Beggar</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="styles/main.css">
    </head>
    <body>
        <div id="loader">
        <div class="hero-unit" style="position:relative; top:15%;"><h1>One map of global events, coming right up &rsaquo;&rsaquo;&rsaquo;</h1></div>
        </div>

        <div class="container">
            <div class="lightbox" id="blackout"></div>
            <div class="surround" id="header">
                <h5 class="title">World News Map
                    <small id="aboutClick">(about)</small></h5>
            </div>
            <div class="lightbox" id="about">
                <h4 id="aboutClose">x</h4>
                <h3>World News Map <small>by <a target="_blank" href="https://twitter.com/nsonnad">Nikhil Sonnad</a></small></h3>
                <div id="social">
                    <div id="fb-root"></div>
                    <script>(function(d, s, id) {
                      var js, fjs = d.getElementsByTagName(s)[0];
                      if (d.getElementById(id)) return;
                      js = d.createElement(s); js.id = id;
                      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=499877830052869";
                      fjs.parentNode.insertBefore(js, fjs);
                    }(document, 'script', 'facebook-jssdk'));</script>
                    <div class="fb-like" data-href="http://worldnewsmap.theoldbeggar.com/" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false"></div>

                    <a href="https://twitter.com/share" class="twitter-share-button" data-via="nsonnad">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    <div class="g-plusone" data-size="medium"></div>
                    <!-- Place this tag where you want the +1 button to render. -->
                    <script type="text/javascript">
                      (function() {
                        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                        po.src = 'https://apis.google.com/js/plusone.js';
                        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                      })();
                    </script>
                </div>
                <h4>The geographical spread of recent world news, as reported by the New York Times.</h4>

                <ul>
                <li>Drag your mouse/finger across the chart in the 'Time' section to see articles in a particular date range</li>
                <li>Click on the name of a place in in 'Place' section to filter by that location</li>
                <li>Drill down by clicking on the circular article clusters</li>
                <li>Shift+click+drag to zoom in on a rectangular area of the map</li>
                <li>Click on an individual map marker to get info on and a link to an article</li>
                </ul>

                <h5>What's underneath</h5>

                <p>This thing works by periodically grabbing articles in the New York Times World section, using the <a href="http://developer.nytimes.com/docs/article_search_api">New York Times Article Search API</a> and finding geodata for article locations with <a href="http://wiki.openstreetmap.org/wiki/Nominatim">Open Street Map's Nominatim</a>. Only recent articles (up to 500) are shown. A small number of articles may be missing: those for which no locations are provided, or for which no lat/lon pairs are found, are thrown out.</p>

                <p>The map itself is produced by <a href="http://leafletjs.com/">Leaflet</a> and some of its great <a href="http://leafletjs.com/plugins.html">plugins</a>, with map tiles served by <a href="http://www.mapbox.com/">MapBox</a>. Lots of other functionality depends on <a href="http://d3js.org/">d3js</a>, and the filtering is powered by <a href="http://square.github.io/crossfilter/">crossfilter</a>.</p>

                <p>Feel free to contact me with questions, comments or feedback via <a href="https://twitter.com/nsonnad">Twitter</a> or <a href="mailto:nikhil@theoldbeggar.com">email</a>.</p>

                <p><small>Note that all the article content displayed here belongs to the New York Times.</small></p>
            </div>

            <div id="map"></div>

            <div class="surround" id="footerWrapper">
                <div id="time">
                    <div id="timeAbs">
                        <div id="timeFixed">
                            <h3>Time <span id="timeSpan"></span>
                                <small id="resetTime">(reset)</small></h3>
                        </div>
                    </div>
                </div>
                <div id="place">
                    <h3>Place <small id="resetPlace">(reset)</small></h3>
                </div>
            </div>
        </div>

        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <script>
            var _gaq=[['_setAccount','UA-35022002-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>

        <!-- build:js scripts/main.js -->
        <script data-main="scripts/main" src="components/requirejs/require.js"></script>
        <!-- endbuild -->
</body>
</html>
